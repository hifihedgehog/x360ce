<UserControl x:Class="x360ce.App.Controls.UserDevicesDebugControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:x360ce.App.Controls"
             mc:Ignorable="d"
             Loaded="UserControl_Loaded"
             Unloaded="UserControl_Unloaded"
	d:DesignHeight="400"
	d:DesignWidth="900"
	Background="{StaticResource BackgroundLight}">
    <UserControl.Resources>
        <ResourceDictionary>
            <!--  MergedDictionaries  -->
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary>
                    <!--  Converter  -->
                    <!--<conv:ContainsKeywordConverterType x:Key="ContainsKeywordConverterType" />-->
                    <!--  Invert Button  -->
                    <!--<Style
					x:Key="Button_Invert"
					BasedOn="{StaticResource Button_Default}"
					TargetType="Button">
                        <Setter Property="Width" Value="25" />
                        <Setter Property="Height" Value="25" />
                        <Setter Property="Margin" Value="0,3,3,3" />
                        <Setter Property="ToolTip" Value="Invert" />
                        <Setter Property="Background" Value="{StaticResource BackgroundDark}" />
                        <Setter Property="Visibility" Value="Collapsed" />
                        <Setter Property="Content" Value="{x:Null}" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Tag.Text, RelativeSource={RelativeSource Self}, Converter={StaticResource ContainsKeywordConverterType}}" Value="Button">
                                <Setter Property="Content" Value="{StaticResource Icon_DragAndDrop_Button}" />
                                <Setter Property="Visibility" Value="Visible" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Tag.Text, RelativeSource={RelativeSource Self}, Converter={StaticResource ContainsKeywordConverterType}}" Value="IButton">
                                <Setter Property="Content" Value="{StaticResource Icon_DragAndDrop_Button_Inverted}" />
                                <Setter Property="Visibility" Value="Visible" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Tag.Text, RelativeSource={RelativeSource Self}, Converter={StaticResource ContainsKeywordConverterType}}" Value="Axis">
                                <Setter Property="Content" Value="{StaticResource Icon_DragAndDrop_Axis}" />
                                <Setter Property="Visibility" Value="Visible" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Tag.Text, RelativeSource={RelativeSource Self}, Converter={StaticResource ContainsKeywordConverterType}}" Value="IAxis">
                                <Setter Property="Content" Value="{StaticResource Icon_DragAndDrop_Axis_Inverted}" />
                                <Setter Property="Visibility" Value="Visible" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Tag.Text, RelativeSource={RelativeSource Self}, Converter={StaticResource ContainsKeywordConverterType}}" Value="HAxis">
                                <Setter Property="Content" Value="{StaticResource Icon_DragAndDrop_Axis_Half}" />
                                <Setter Property="Visibility" Value="Visible" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Tag.Text, RelativeSource={RelativeSource Self}, Converter={StaticResource ContainsKeywordConverterType}}" Value="IHAxis">
                                <Setter Property="Content" Value="{StaticResource Icon_DragAndDrop_Axis_Half_Inverted}" />
                                <Setter Property="Visibility" Value="Visible" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Tag.Text, RelativeSource={RelativeSource Self}, Converter={StaticResource ContainsKeywordConverterType}}" Value="Slider">
                                <Setter Property="Content" Value="{StaticResource Icon_DragAndDrop_Axis}" />
                                <Setter Property="Visibility" Value="Visible" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Tag.Text, RelativeSource={RelativeSource Self}, Converter={StaticResource ContainsKeywordConverterType}}" Value="ISlider">
                                <Setter Property="Content" Value="{StaticResource Icon_DragAndDrop_Axis_Inverted}" />
                                <Setter Property="Visibility" Value="Visible" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Tag.Text, RelativeSource={RelativeSource Self}, Converter={StaticResource ContainsKeywordConverterType}}" Value="HSlider">
                                <Setter Property="Content" Value="{StaticResource Icon_DragAndDrop_Axis_Half}" />
                                <Setter Property="Visibility" Value="Visible" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Tag.Text, RelativeSource={RelativeSource Self}, Converter={StaticResource ContainsKeywordConverterType}}" Value="IHSlider">
                                <Setter Property="Content" Value="{StaticResource Icon_DragAndDrop_Axis_Half_Inverted}" />
                                <Setter Property="Visibility" Value="Visible" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>-->
                    <!--  Drag and Drop menu GroupBox  -->
                    <Style
					x:Key="DragAndDropGroupBox"
					BasedOn="{StaticResource GroupBox_Default}"
					TargetType="GroupBox">
                        <Setter Property="Margin" Value="0,-1,0,0" />
                        <Setter Property="Padding" Value="5,0,2,3" />
                    </Style>
                    <!--  Drag and Drop menu Input Label  -->
                    <Style x:Key="DragAndDropDInputLabel" TargetType="Label">
                        <Setter Property="HorizontalAlignment" Value="Center" />
                        <Setter Property="IsHitTestVisible" Value="False" />
                        <Setter Property="Content" Value="STEP 3 - Drag and drop labels into text boxes." />
                    </Style>
                    <Style x:Key="DragAndDropXInputBorder" TargetType="Border">
                        <Setter Property="Margin" Value="0,2,0,0" />
                        <Setter Property="HorizontalAlignment" Value="Center" />
                        <Setter Property="VerticalAlignment" Value="Top" />
                        <Setter Property="IsHitTestVisible" Value="False" />
                        <Setter Property="CornerRadius" Value="5" />
                        <Setter Property="Background" Value="{StaticResource BackgroundDark}" />
                    </Style>
                    <Style x:Key="DragAndDropXInputLabel" TargetType="Label">
                        <Setter Property="HorizontalAlignment" Value="Center" />
                        <Setter Property="Padding" Value="7,2,8,3" />
                        <Setter Property="IsHitTestVisible" Value="False" />
                        <Setter Property="Content" Value="Virtual Xbox 360 Controller" />
                    </Style>
                    <!--  Drag and Drop menu Title Label  -->
                    <Style x:Key="DragAndDropDInputTitleLabel" TargetType="Label">
                        <Setter Property="Margin" Value="0" />
                        <Setter Property="Padding" Value="0" />
                        <Setter Property="HorizontalAlignment" Value="Center" />
                        <Setter Property="Opacity" Value="0.3" />
                        <Setter Property="IsHitTestVisible" Value="False" />
                        <Setter Property="Content" Value="Drag and Drop Menu" />
                        <Setter Property="Visibility" Value="Collapsed" />
                    </Style>
                    <!--  Drag and Drop menu "Loading..." Label  -->
                    <Style x:Key="DragAndDropLoadingLabel" TargetType="Label">
                        <Setter Property="Margin" Value="0,20,0,20" />
                        <Setter Property="Padding" Value="9,3,9,6" />
                        <Setter Property="HorizontalAlignment" Value="Center" />
                        <Setter Property="IsHitTestVisible" Value="False" />
                        <Setter Property="Content" Value="Loading..." />
                    </Style>
                    <!--  Drag and Drop menu Label  -->
                    <Style x:Key="DragAndDropLabel" TargetType="Label">
                        <Setter Property="IsHitTestVisible" Value="True" />
                        <Setter Property="Background" Value="{StaticResource BackgroundDark}" />
                        <Setter Property="Padding" Value="5,3,5,3" />
                        <Setter Property="Margin" Value="0,0,3,3" />
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Label">
                                    <Border
									Name="MouseOverBorder"
									Background="{StaticResource BackgroundDark}"
									CornerRadius="5">
                                        <Border
										Padding="{TemplateBinding Padding}"
										Background="{TemplateBinding Background}"
										CornerRadius="5">
                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                        </Border>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="MouseOverBorder" Property="Background" Value="{StaticResource BackgroundDarkSelected}" />
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                    <!--  XInput value Label  -->
                    <Style x:Key="ValuesLeftLabel" TargetType="Label">
                        <Setter Property="HorizontalAlignment" Value="Left" />
                        <Setter Property="Foreground" Value="Green" />
                        <Setter Property="Padding" Value="0" />
                        <Setter Property="FontSize" Value="8" />
                        <Setter Property="Content" Value="0" />
                        <Setter Property="Margin" Value="3,-1,3,0" />
                    </Style>
                    <Style
					x:Key="ValuesRightLabel"
					BasedOn="{StaticResource ValuesLeftLabel}"
					TargetType="Label">
                        <Setter Property="HorizontalAlignment" Value="Right" />
                    </Style>
                </ResourceDictionary>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid VerticalAlignment="Stretch">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>

        <TabControl Margin="3,3,0,0">
            <TabItem>
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <ContentControl
					Name="DevicesTab"
					Margin="0,0,3,0"
					Content="{StaticResource Icon_gamepad}" />
                        <TextBlock Text="DEVICES" />
                    </StackPanel>
                </TabItem.Header>

                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <!-- Search and buttons -->
                    <DockPanel>
                        <Button
                            Name="RefreshButton"
                            DockPanel.Dock="Right"
                            Margin="0,3,3,3"
                            Click="RefreshButton_Click">
                        <StackPanel>
                            <ContentControl Content="{StaticResource Icon_Refresh}" />
                            <Label Content="Refresh" Padding="0" />
                        </StackPanel>
                        </Button>
                        <TextBox
                            Name="InputDeviceSearch"
                            Width="400"
                            HorizontalAlignment="Left"
                            VerticalContentAlignment="Center"
                            TextChanged="InputDeviceSearch_TextChanged"/>
                        <Button
                            Name="ClearButton"
                            DockPanel.Dock="Left"
                            Margin="0,3,3,3"
                            Click="ClearButton_Click">
                            <StackPanel>
                                <ContentControl Content="{StaticResource Icon_Cleanup}" />
                                <Label Content="Clear" Padding="0" />
                            </StackPanel>
                        </Button>
                        <Border Margin="0,3,3,3" Style="{StaticResource BorderDescriptionNormal}">
                            <Label
				                Content="Press and hold any button or POV to find device inputs in the list."				
                                Padding="3,3,3,4"
				                HorizontalAlignment="Center" />
                        </Border>
                    </DockPanel>

                    <!-- DataGird of Unified Input Devices -->
                    <Border
                       Grid.Row="1"
                       Background="{StaticResource BackgroundWhite}"
                       CornerRadius="0,0,5,5">
                        <DataGrid
                            AutoGenerateColumns="False"
                            IsReadOnly="True"
                            x:Name="UnifiedInputDeviceInfoDataGrid">
                            <DataGrid.Resources>
                                <Style BasedOn="{StaticResource DataGridHeader_Sorting}" TargetType="DataGridColumnHeader" />
                                <Style TargetType="DataGridRow">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding InputType}" Value="PnPInput">
                                            <Setter Property="Background" Value="#F0F0F0" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding InputType}" Value="RawInput">
                                            <Setter Property="Background" Value="#FFE0E0" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding InputType}" Value="DirectInput">
                                            <Setter Property="Background" Value="#E0E8FF" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding InputType}" Value="XInput">
                                            <Setter Property="Background" Value="#E0FFE0" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding InputType}" Value="GamingInput">
                                            <Setter Property="Background" Value="#FFFFE0" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                                <Style TargetType="DataGridCell">
                                    <Setter Property="IsTabStop" Value="False" />
                                    <Setter Property="BorderThickness" Value="0"/>
                                    <Style.Triggers>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
                                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}" />
                                            <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                                <Style TargetType="TextBox">
                                    <Setter Property="IsReadOnly" Value="True"/>
                                    <Setter Property="BorderThickness" Value="0"/>
                                    <Setter Property="Padding" Value="1"/>
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Setter Property="IsTabStop" Value="False"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsSelected, RelativeSource={RelativeSource AncestorType=DataGridCell}}" Value="True">
                                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </DataGrid.Resources>
                            <DataGrid.Columns>
                                <DataGridTemplateColumn Header="InputType" SortMemberPath="InputType" Width="Auto">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBox Text="{Binding InputType, Mode=OneWay}"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="CommonIdentifier" SortMemberPath="CommonIdentifier" Width="Auto">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBox Text="{Binding CommonIdentifier, Mode=OneWay}"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTextColumn x:Name="AxisColumn" Header="A" Binding="{Binding AxeCount}" Width="Auto">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="TextAlignment" Value="Center"/>
                                            <Setter Property="Padding" Value="1"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn x:Name="SliderColumn" Header="S" Binding="{Binding SliderCount}" Width="Auto">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="TextAlignment" Value="Center"/>
                                            <Setter Property="Padding" Value="1"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn x:Name="ButtonColumn" Header="B" Binding="{Binding ButtonCount}" Width="Auto">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="TextAlignment" Value="Center"/>
                                            <Setter Property="Padding" Value="1"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn x:Name="KeyColumn" Header="K" Binding="{Binding KeyCount}" Width="Auto">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="TextAlignment" Value="Center"/>
                                            <Setter Property="Padding" Value="1"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>
                                <DataGridTextColumn x:Name="PovColumn" Header="P" Binding="{Binding PovCount}" Width="Auto">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="TextAlignment" Value="Center"/>
                                            <Setter Property="Padding" Value="1"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>

                                <DataGridTextColumn x:Name="ProductName" Header="ProductName" Binding="{Binding ProductName}" Width="Auto" SortMemberPath="ProductName" >
                                    <DataGridTextColumn.CellStyle>
                                        <Style TargetType="DataGridCell">
                                            <Setter Property="BorderThickness" Value="0"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding ButtonPressed}" Value="True">
                                                    <Setter Property="Background" Value="#88ff0000"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </DataGridTextColumn.CellStyle>
                                </DataGridTextColumn>

                                <DataGridTemplateColumn Header="InterfacePath" SortMemberPath="InterfacePath" Width="*">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBox Text="{Binding InterfacePath, Mode=OneWay}"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Border>
                </Grid>

            </TabItem>
        </TabControl>

        <!-- Selected Device Inputs -->
        <TabControl Margin="3,3,3,3" Grid.Column="1" Grid.RowSpan="3">
            <TabItem>
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <ContentControl
					Name="SelectedDeviceInputTab"
					Margin="0,0,3,0"
					Content="{StaticResource Icon_gamepad}" />
                        <TextBlock Text="SELECTED DEVICE INPUT" />
                    </StackPanel>
                </TabItem.Header>

                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Name="DragAndDropStackPanel" Margin="3,0,3,3" MinWidth="200">
                        <StackPanel.Resources>
                            <Style BasedOn="{StaticResource DragAndDropGroupBox}" TargetType="GroupBox" />
                            <Style BasedOn="{StaticResource DragAndDropLabel}" TargetType="Label" />
                        </StackPanel.Resources>
                    </StackPanel>
                </ScrollViewer>

            </TabItem>
        </TabControl>

        <!-- Selected Device Information -->
        <TabControl Margin="3,3,0,3" Grid.Row="2">
            <TabItem>
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <ContentControl
					Name="SelectedDeviceInformationTab"
					Margin="0,0,3,0"
					Content="{StaticResource Icon_gamepad}" />
                        <TextBlock Text="SELECTED DEVICE INFORMATION" />
                    </StackPanel>
                </TabItem.Header>

                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Name="SelectedDeviceInformationStackPanel"/>
                </ScrollViewer>

            </TabItem>
        </TabControl>

    </Grid>
</UserControl>
